sudo: false

language: node_js

# Avoid build issues due to rate limiting of github API
# by configuring jspm to authenticate using a personal
# Github token.
# see Travis setup of Github token for jspm:
# https://gist.github.com/topheman/25241e48a1b4f91ec6d4
# for details.
#
# The secure encrypted environment variable  JSPM_GITHUB_AUTH_TOKEN
# is expected to be added here, or can also be set in the project
# settings.
# This is how it looks:
#env:
#  global:
#    - secure: "<long base64 encoded value>"

node_js:
  - "4.0"
  - "iojs"
  - "0.12"

addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8

before_install:
  - npm install -g npm
  - npm install -g node-gyp
  - node-gyp clean
  - npm install -g jspm
  - jspm config registries.github.auth $JSPM_GITHUB_AUTH_TOKEN
  - export CHROME_BIN=chromium-browser
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

install:
  - export CXX=g++-4.8
  - $CXX --version
  - npm install
  - jspm install

script:
  - npm run test-all-travis
  - npm run lint
